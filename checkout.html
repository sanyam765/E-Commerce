<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout - HearHut</title>
  <link rel="stylesheet" href="style.css">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 20px;
    }

    .checkout-container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    h2 {
      margin-bottom: 20px;
      text-align: center;
      color: var(--primary-color);
    }

    .order-summary {
      margin-bottom: 30px;
    }

    .order-summary h3 {
      margin-bottom: 10px;
    }

    .order-items {
      margin-bottom: 15px;
      border-bottom: 1px solid #ddd;
      padding-bottom: 10px;
    }

    .checkout-form label {
      font-weight: 600;
      display: block;
      margin-top: 15px;
    }

    .checkout-form input {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    .place-order-btn {
      margin-top: 25px;
      width: 100%;
      padding: 14px;
      background: var(--primary-color);
      color: white;
      font-weight: 600;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .place-order-btn:hover {
      background: #005acc;
    }

    .success-message {
      display: none;
      text-align: center;
      margin-top: 20px;
      padding: 15px;
      background: #e0ffe8;
      border: 1px solid #00cc6a;
      border-radius: 10px;
      color: #007a33;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="checkout-container">
    <h2>Checkout</h2>

    <!-- Order Summary -->
    <div class="order-summary">
      <h3>Your Order</h3>
      <div id="order-items"></div>
      <p><strong>Total: â‚¹<span id="order-total">0</span></strong></p>
    </div>

    <!-- Checkout Form -->
    <form class="checkout-form" id="checkout-form">
      <label>Full Name</label>
      <input type="text" required>

      <label>Email</label>
      <input type="email" required>

      <label>Shipping Address</label>
      <input type="text" required>

      <label>Payment Method</label>
      <input type="text" placeholder="Card / UPI / COD" required>

      <button type="submit" class="place-order-btn">Place Order</button>
    </form>

    <!-- Success Message -->
    <div class="success-message" id="success-message">
      âœ… Your order has been placed successfully! ðŸŽ‰
    </div>
  </div>

<script>
  // Load cart data from localStorage
  const orderItems = document.getElementById("order-items");
  const orderTotal = document.getElementById("order-total");

  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  let total = 0;

  if(cart.length === 0){
    orderItems.innerHTML = "<p>Your cart is empty!</p>";
  } else {
    cart.forEach(item => {
      total += item.price * item.quantity;
      orderItems.innerHTML += `
        <div class="order-items">
          ${item.name} Ã— ${item.quantity} = â‚¹${(item.price * item.quantity).toFixed(2)}
        </div>
      `;
    });
    orderTotal.textContent = total.toFixed(2);
  }

  // Place order action
  document.getElementById("checkout-form").addEventListener("submit", (e) => {
    e.preventDefault();

    const name = e.target[0].value;
    const email = e.target[1].value;
    const address = e.target[2].value;
    const payment = e.target[3].value;

    const order = {
      id: Date.now(),
      name,
      email,
      address,
      payment,
      cart,
      total: total.toFixed(2),
      date: new Date().toLocaleString()
    };

    // Save order in localStorage
    let orders = JSON.parse(localStorage.getItem("orders")) || [];
    orders.push(order);
    localStorage.setItem("orders", JSON.stringify(orders));

    // Show success
    document.getElementById("success-message").style.display = "block";

    // Clear cart
    localStorage.removeItem("cart");

    // Redirect to orders page or homepage
    setTimeout(() => {
      window.location.href = "orders.html";
    }, 2000);
  });
</script>

</body>
</html>
